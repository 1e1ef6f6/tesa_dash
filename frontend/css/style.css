/* frontend/css/style.css */
:root{
  --bg:#0b0f14; --panel:#0d1722; --panel2:#0f1e2c;
  --ink:#eaf6ff; --muted:#8aa3b6; --ok:#35d39a; --danger:#ff7070;
  --acc:#2bd6b6; --acc2:#4aa3ff; --line:#163244;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
.container{max-width:1480px;margin:24px auto;padding:0 16px}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
h1{margin:0;font-size:22px;letter-spacing:.2px}

/* Production-Ready Button Styles (ปุ่มเด้ง/เงา) */
a.btn{
  display:inline-flex;gap:8px;align-items:center;text-decoration:none;
  background:linear-gradient(180deg,#0f2a3f,#0a1c2b);
  padding:10px 14px;border-radius:10px;border:1px solid #1e3b55;
  color:#cfe8ff;
  transition: all 0.15s ease-out; /* สำหรับปุ่มเด้ง */
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4); /* เงาเริ่มต้น */
}
a.btn:hover{
  filter:brightness(1.1);
  transform: translateY(-1px); /* ปุ่มเด้งขึ้นเล็กน้อย */
  box-shadow: 0 6px 14px rgba(43, 214, 182, 0.2), 0 5px 12px rgba(0, 0, 0, 0.4);
}
a.btn:active {
  transform: translateY(1px); /* ปุ่มยุบลงเมื่อกด */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Card/KPI Styles (เงาเมื่อ Hover) */
.card, .kpi{
  background:linear-gradient(180deg,var(--panel),var(--panel2));
  border:1px solid var(--line);
  border-radius:14px;padding:16px;
  box-shadow:0 10px 26px rgba(0,0,0,.35);
  transition: box-shadow 0.3s ease;
}
.kpi{
  background:rgba(9,14,18,.8);
  border:1px solid #162a39;
  padding:14px;
}
/* เงาเมื่อลากเมาส์ผ่าน */
.card:hover {
  box-shadow:0 10px 30px rgba(var(--acc), 0.2), 0 0 10px var(--acc);
}
.kpi:hover {
  border-color: var(--acc);
}


.grid2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.section-title{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.section-title h2{margin:0;font-size:18px}
.pill{padding:5px 12px;border-radius:999px;font-size:12px;border:1px solid #2b3e50}
.pill.connected{background:#0f362a;color:#7bffd4;border-color:#2bd6b6}
.pill.disconnected{background:#3a1a1a;color:#ffd5d5;border-color:#ff8b8b}
.diag{font-family:ui-monospace,Consolas,monospace;color:#9db4c6;font-size:13px}
.hr{height:1px;background:#112433;margin:10px 0}

.smallgrid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px}
.kpi h4{margin:0 0 6px 0;color:#a8c6d9;font-weight:600}
.kpi .v{font-size:26px}

.panel-col{display:grid;grid-template-rows:auto;gap:12px}
.monitor-grid{display:grid;gap:12px;grid-template-areas:"map""camera""tools";}
.map-wrap{grid-area:map;position:relative;border-radius:16px;overflow:hidden;border:1px solid var(--line);background:#09121a}
/* ใช้ Mapbox */
#def-map,#off-map{height:420px;width:100%} 
.tools{grid-area:tools;display:flex;gap:8px;flex-wrap:wrap}
.cam-wrap{grid-area:camera;position:relative;border-radius:16px;overflow:hidden;border:1px solid var(--line);background:#0a1420}

.pip{
  position:absolute;left:14px;top:14px;width:300px;height:170px;border-radius:12px;
  overflow:hidden;border:1px solid #21425c;background:#0b1420;
  box-shadow:0 10px 24px rgba(0,0,0,.65);z-index:1200;cursor:pointer;
  transition: all 0.2s ease-out; /* เพิ่ม transition */
}
.pip:hover {
  border-color: var(--acc); /* เน้นเมื่อ hover */
  transform: scale(1.02);
}
.pip img{width:100%;height:100%;object-fit:cover;display:block}
.pip .empty{display:flex;align-items:center;justify-content:center;height:100%;color:var(--muted);font-size:12px}

/* Expanded: move PiP to camera area same size as map */
.camera-expanded .pip{
  position:static;width:100%;height:420px;border-radius:16px;
  box-shadow:none;z-index:auto;cursor:zoom-out;
}
.camera-expanded .pip:hover {
  transform: none; /* ยกเลิกการ scale เมื่อขยาย */
}


.legend{display:flex;gap:8px;align-items:center;font-size:12px;color:#b5cfe3}
.dot{width:8px;height:8px;border-radius:999px;display:inline-block}
.dot.def{background:var(--acc)}
.dot.off{background:var(--acc2)}

.zoom-note{font-size:12px;color:#8fb1c6}

/* --- Mapbox Custom Styles --- */
/* Marker สำหรับ Drone Tracking */
.drone-marker {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  border: 2px solid var(--panel); 
  transition: transform 0.15s ease-out, box-shadow 0.15s ease-out;
  cursor: pointer;
}
.drone-marker:hover {
  transform: scale(1.8); /* ขยายเมื่อ hover */
  border-color: var(--ink);
  box-shadow: 0 0 18px rgba(255, 255, 255, 0.9) !important; 
}

/* Mapbox Popup Style */
.mapboxgl-popup-content {
  background: var(--panel2) !important;
  color: var(--ink);
  padding: 10px !important;
  border-radius: 8px !important;
  border: 1px solid var(--line) !important;
  font-family: inherit;
  font-size: 13px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.5) !important;
}

.mapboxgl-ctrl-bottom-right, .mapboxgl-ctrl-bottom-left {
  z-index: 1000; /* อยู่เหนือ PiP ที่มี z-index 1200 (เมื่อไม่ได้ขยาย) */
}

/* Mapbox Navigation Control Style */
.mapboxgl-ctrl-group button {
  background-color: var(--panel2) !important;
  color: var(--ink) !important;
  border: 1px solid var(--line) !important;
}
.mapboxgl-ctrl-group button:hover {
  background-color: var(--panel) !important;
}